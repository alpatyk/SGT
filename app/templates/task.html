{% extends "base.html" %}
{% block title %}{{ task.title }} - Sistema de Tarefas{% endblock %}
{% block content %}
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h2>{{ task.title }}</h2>
        <div>
            <span class="badge bg-{% if task.status == 'pendente' %}warning{% elif task.status == 'em_andamento' %}info{% else %}success{% endif %}">
                {{ task.status|replace('_', ' ')|title }}
            </span>
        </div>
    </div>
    <div class="card-body">
        <p class="card-text">{{ task.description }}</p>
        <div class="mb-3">
            <strong>Criada por:</strong> {{ task.author.username }}
        </div>
        {% if task.assigned_to %}
            <div class="mb-3">
                <strong>Atribuída para:</strong> {{ task.assignee.username }}
            </div>
        {% endif %}
        <div class="mb-3">
            <strong>Data de criação:</strong> {{ task.date_created.strftime('%d/%m/%Y %H:%M') }}
        </div>
        
        {% if task.user_id == current_user.id %}
            <div class="btn-group">
                <a href="{{ url_for('main.update_task', task_id=task.id) }}" class="btn btn-primary">Editar</a>
                <form action="{{ url_for('main.delete_task', task_id=task.id) }}" method="POST" class="d-inline">
                    <input type="hidden" name="_method" value="DELETE">
                    <button type="submit" class="btn btn-danger">Excluir</button>
                </form>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}